(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(57)},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),c=a.n(l),s=a(59),o=a(60),i=a(61),u=a(15),m=a(23),d=a(6),h=a(7),p=a(9),f=a(8),b=a(10),E=a(11),v=a.n(E),g={getBooks:function(){return v.a.get("/api/books")},getBook:function(e){return v.a.get("/api/books/"+e)},deleteBook:function(e){return v.a.delete("/api/books/"+e)},saveBook:function(e){return v.a.post("/api/books",e)},queryNYT:function(e){return v.a.get(e)}},k=a(24),y=a.n(k),N=function(e){return r.a.createElement("li",{className:"list-group-item"},e.children)},Y=function(e){return r.a.createElement("div",{className:"list-group",style:{margin:"30px 0"}},r.a.createElement("a",{href:e.url,className:"bg-dark list-group-item list-group-item-action flex-column align-items-start active",target:"_blank"},r.a.createElement("div",{className:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{className:"mb-1"},e.title),r.a.createElement("small",null,y()(e.date).format("dddd, MMMM Do YYYY, h:mm")))),r.a.createElement(N,{className:"list-group-item"},r.a.createElement("div",{className:" w-75",style:{display:"inline-block"}},r.a.createElement("h5",{className:"mb-1"},e.summary)),r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example",style:{float:"right"}},r.a.createElement("a",{href:e.url,target:"_blank"},r.a.createElement("button",{type:"button",className:"btn btn-info"},"Read")),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:e.onClick},e.type))))},B=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={navbarHeight:0},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setState({navbarHeight:document.querySelector(".navbar").clientHeight})}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:200,clear:"both",marginTop:this.state.navbarHeight},className:"jumbotron"},this.props.children)}}]),t}(r.a.Component),S=function(e){return r.a.createElement("h1",e,e.children)},j=function(e){return r.a.createElement("h3",e,e.children)},O=function(e){return r.a.createElement("h4",e,e.children)},w=function(e){var t=e.size,a=e.offset,n=e.children,l=t.split(" ").map(function(e){return"col-"+e}).join(" ")+" "+(a?a.split(" ").map(function(e){return"col-".concat(e.split("-")[0],"-offset-").concat(e.split("-")[1])}).join(" "):"");return r.a.createElement("div",{className:l},n)},x=function(e){var t=e.fluid,a=e.children;return r.a.createElement("div",{className:"container".concat(t?"-fluid":"")},a)},C=function(e){var t=e.fluid,a=e.children;return r.a.createElement("div",{className:"row".concat(t?"-fluid":"")},a)},F=function(e){return r.a.createElement("div",Object.assign({className:"panel panel-primary"},e),e.children)},_=function(e){return r.a.createElement("div",Object.assign({className:"panel-heading clearfix"},e),e.children)},R=function(e){return r.a.createElement("div",Object.assign({className:"panel-body"},e),e.children)},T=function(e){return r.a.createElement("input",Object.assign({className:"form-control"},e))},I=function(e){var t="btn ";switch(e.type){case"primary":t+="btn-primary";break;case"success":t+="btn-success";break;case"info":t+="btn-info";break;case"warning":t+="btn-warning";break;case"danger":t+="btn-danger";break;case"link":t+="btn-link";break;case"default":t+="btn-default"}return t+=" "+e.additional,r.a.createElement("button",Object.assign({},e,{className:t}),e.children)},M=function(e){return r.a.createElement("label",Object.assign({htmlFor:e.htmlFor},e),e.children)},z=function(e){return r.a.createElement("div",Object.assign({className:"form-group"},e),e.children)},q=function(e){return r.a.createElement("form",e,e.children)},A=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={topic:"",sYear:"",eYear:"",page:"0",results:[],previousSearch:{},noResults:!1},a.saveBook=function(e){var t={date:e.pub_date,title:e.headline.main,url:e.web_url,summary:e.description};g.saveBook(t).then(function(e){var n=a.state.results.filter(function(e){return e.headline.main!==t.title});a.setState({results:n})}).catch(function(e){return console.log(e)})},a.handleInputChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(m.a)({},n,r))},a.handleFormSubmit=function(e){e.preventDefault();var t=a.state,n={topic:t.topic,sYear:t.sYear,eYear:t.eYear};a.getBooks(n)},a.getBooks=function(e){e.topic===a.state.previousSearch.topic&&e.eYear===a.state.previousSearch.eYear&&e.sYear===a.state.previousSearch.sYear||a.setState({results:[]});var t=e.topic,n=e.sYear,r=e.eYear,l="https://api.nytimes.com/svc/books/v3/lists/current/hardcover-fiction.json?api-key=you".concat(a.state.page);t.indexOf(" ")>=0&&(t=t.replace(/\s/g,"+")),t&&(l+="&fq=".concat(t)),n&&(l+="&begin_date=".concat(n)),r&&(l+="&end_date=".concat(r)),l+="&api-key=TZBzEuyISaV432LqBahDZC1YwILc41s7",g.queryNYT(l).then(function(t){a.setState({results:[].concat(Object(u.a)(a.state.results),Object(u.a)(t.data.response.docs)),previousSearch:e,topic:"",sYear:"",eYear:""},function(){0===this.state.results.length?this.setState({noResults:!0}):this.setState({noResults:!1})})}).catch(function(e){return console.log(e)})},a.getMoreResults=function(){var e=a.state.previousSearch,t={topic:e.topic,eYear:e.eYear,sYear:e.sYear},n=a.state.page;n++,a.setState({page:n},function(){this.getBooks(t)})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(x,{fluid:!0},r.a.createElement(C,null,r.a.createElement(w,{size:"sm-10",offset:"sm-1"},r.a.createElement(B,null,r.a.createElement(S,{className:"page-header text-center"},"New York Times Best Seller Searcher"),r.a.createElement(O,{className:"text-center"},"Search for and save books of interest")),r.a.createElement(F,null,r.a.createElement(_,null,r.a.createElement(j,null,"Search")),r.a.createElement(R,null,r.a.createElement(q,{style:{marginBottom:"30px"}},r.a.createElement(z,null,r.a.createElement(M,{htmlFor:"topic"},"Enter a topic to search for:"),r.a.createElement(T,{onChange:this.handleInputChange,name:"topic",value:this.state.topic,placeholder:"Topic"})),r.a.createElement(z,null,r.a.createElement(M,{htmlFor:"sYear"},"Enter a beginning date to search for (optional):"),r.a.createElement(T,{onChange:this.handleInputChange,type:"date",name:"sYear",value:this.state.sYear,placeholder:"Start Year"})),r.a.createElement(z,null,r.a.createElement(M,{htmlFor:"eYear"},"Enter an end date to search for (optional):"),r.a.createElement(T,{onChange:this.handleInputChange,type:"date",name:"eYear",value:this.state.eYear,placeholder:"End Year"})),r.a.createElement(I,{disabled:!this.state.topic,onClick:this.handleFormSubmit,type:"info"},"Submit")))),this.state.noResults?r.a.createElement(S,null,"No results Found.  Please try again"):this.state.results.length>0?r.a.createElement(F,null,r.a.createElement(_,null,r.a.createElement(j,null,"Results")),r.a.createElement(R,null,this.state.results.map(function(t,a){return r.a.createElement(Y,{key:a,title:t.headline.main,url:t.web_url,summary:t.snippet,date:t.pub_date,type:"Save",onClick:function(){return e.saveBook(t)}})}),r.a.createElement(I,{type:"warning",additional:"btn-block",onClick:this.getMoreResults},"Get more results"))):"")))}}]),t}(n.Component),D=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={savedBooks:[]},a.loadBooks=function(){g.getBooks().then(function(e){a.setState({savedBooks:e.data})})},a.deleteBook=function(e){g.deleteBook(e).then(function(t){var n=a.state.savedBooks.filter(function(t){return t._id!==e});a.setState({savedBooks:n}),a.loadBooks()}).catch(function(e){return console.log(e)})},a}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){this.loadBooks()}},{key:"render",value:function(){var e=this;return r.a.createElement(x,{fluid:!0},r.a.createElement(C,null,r.a.createElement(w,{size:"sm-10",offset:"sm-1"},r.a.createElement(B,null,r.a.createElement(S,{className:"text-center"},"Saved NYT Top Seller Books"),r.a.createElement("hr",{style:{width:"60%"}})),r.a.createElement(F,null,r.a.createElement(_,null,r.a.createElement(j,null,"Saved Books")),r.a.createElement(R,null,this.state.savedBooks.length>0?this.state.savedBooks.map(function(t,a){return r.a.createElement(Y,{key:a,title:t.title,url:t.url,summary:t.summary,date:t.date,type:"Delete",onClick:function(){return e.deleteBook(t._id)}})}):r.a.createElement(S,null,"You have no saved books."))))))}}]),t}(n.Component),H=function(){return r.a.createElement(x,{fluid:!0},r.a.createElement(C,null,r.a.createElement(w,{size:"sm-10",offset:"sm-1"},r.a.createElement(B,null,r.a.createElement(S,{className:"text-center"},"404 OOPS!  You did something wrong"),r.a.createElement(S,{className:"text-center"},r.a.createElement("span",{role:"img","aria-label":"Face With Rolling Eyes Emoji"},"\ud83d\ude44",r.a.createElement("br",null)))))))},J=a(58),L=function(){return r.a.createElement("nav",{className:"navbar navbar-dark bg-primary",style:{position:"fixed",zIndex:100,width:"100%"}},r.a.createElement(J.a,{className:"navbar-brand",to:"/"},"NYT Best Seller Finder"),r.a.createElement("ul",{className:"navbar-nav",style:{float:"right"}},r.a.createElement("li",{className:"nav-item"},r.a.createElement(J.a,{to:"/"},r.a.createElement("button",{type:"button",className:"btn btn-info"},"Home"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement(J.a,{to:"/savedArticles"},r.a.createElement("button",{type:"button",className:"btn btn-info"},"Saved Books")))))},P=function(){return r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(L,null),r.a.createElement(o.a,null,r.a.createElement(i.a,{exact:!0,path:"/",component:A}),r.a.createElement(i.a,{exact:!0,path:"/articles",component:A}),r.a.createElement(i.a,{exact:!0,path:"/savedArticles",component:D}),r.a.createElement(i.a,{component:H}))))};a(56);c.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.ab455da5.chunk.js.map